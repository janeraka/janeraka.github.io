"use strict";(self["webpackChunkjanereka_ryru"]=self["webpackChunkjanereka_ryru"]||[]).push([[299],{4299:(e,i,t)=>{t.r(i),t.d(i,{default:()=>x});var a=t(3673),s=t(8880),l=t(2323);const o={class:"text-center q-mb-xl"},n=(0,a._)("span",{class:"text-h6"},"Editar detalhes",-1),r={for:"filename",class:"inline-block q-mt-lg"},d={for:"description",class:"inline-block q-mt-lg"},m={class:"row no-wrap q-mt-xl items-center"},u={class:"text-h6"},c=(0,a._)("div",{class:"col-grow q-mx-md bg-black",style:{height:"2px"}},null,-1),h={for:"authorname",class:"inline-block q-mt-lg"},p={for:"authorname",class:"inline-block q-mt-lg"},b={class:"text-body2"};function w(e,i,t,w,g,f){const q=(0,a.up)("q-input"),y=(0,a.up)("tags-form-input"),A=(0,a.up)("q-select"),k=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",o,[n,(0,a.Wm)(k,{class:"constrain text-left q-pb-sm",onSubmit:(0,s.iM)(f.submit,["prevent","stop"])},{default:(0,a.w5)((()=>[(0,a._)("label",r,(0,l.zw)(e.$t("submission.formFieldLabelFilename")),1),(0,a.Wm)(q,{dense:"",filled:"",id:"filename",modelValue:g.newTitle,"onUpdate:modelValue":i[0]||(i[0]=e=>g.newTitle=e),rules:[i=>!!i||e.$t("submission.formValidationFieldRequired")]},null,8,["modelValue","rules"]),(0,a._)("label",d,(0,l.zw)(e.$t("submission.formFieldLabelDescription")),1),(0,a.Wm)(q,{dense:"",filled:"",autogrow:"",id:"description",type:"textarea",modelValue:g.newDescription,"onUpdate:modelValue":i[1]||(i[1]=e=>g.newDescription=e),rules:[i=>!!i||e.$t("submission.formValidationFieldRequired")]},null,8,["modelValue","rules"]),(0,a.Wm)(y,{tagsFromProps:g.tags,onParsedTags:i[2]||(i[2]=e=>f.updateTags(e))},null,8,["tagsFromProps"]),(0,a._)("div",m,[(0,a._)("span",u,(0,l.zw)(e.$t("submission.formSectionTitleAuthor")),1),c]),(0,a._)("label",h,(0,l.zw)(e.$t("submission.formFieldLabelAuthorName")),1),(0,a.Wm)(q,{dense:"",filled:"",id:"authorname",modelValue:g.newAuthorname,"onUpdate:modelValue":i[3]||(i[3]=e=>g.newAuthorname=e),placeholder:e.$t("submission.formFieldPlaceholderNameAuthor"),rules:[i=>!!i||e.$t("submission.formValidationFieldRequired")]},null,8,["modelValue","placeholder","rules"]),(0,a._)("label",p,(0,l.zw)(e.$t("submission.formFieldLabelAuthorOrigin")),1),(0,a.Wm)(A,{outlined:"",clearable:"",dense:"",filled:"",modelValue:g.newAldeia,"onUpdate:modelValue":i[4]||(i[4]=e=>g.newAldeia=e),options:g.aldeias,"label-slot":!g.newAldeia,rules:[i=>!!i||e.$t("submission.formValidationFieldRequired")],"popup-content-class":"text-weight-medium q-ma-md","popup-content-style":"border: 2px solid black; border-radius: 5px;",color:"black",class:"q-my-sm",style:{"min-width":"250px"}},{selected:(0,a.w5)((()=>[(0,a._)("span",b,(0,l.zw)(g.newAldeia),1)])),_:1},8,["modelValue","options","label-slot","rules"])])),_:1},8,["onSubmit"])])}t(71);var g=t(1098);const f={name:"EditMedia",components:{TagsFormInput:()=>t.e(645).then(t.bind(t,5645))},props:{media:{type:Object,required:!0},triggerSubmit:{type:Boolean,required:!1,default:!1}},data(){return{mediaManager:g.b.getManager(),loading:!1,newTitle:"",newDescription:"",newAuthorname:"",newAldeia:"",tags:new Set,aldeias:["Gavi達o","Itaaka","Janeraka","Kwatinema","Muyryna","N達o pertence a uma aldeia"]}},watch:{async triggerSubmit(e,i){await this.submit(),this.$emit("finished-submission")}},mounted(){this.media.titulo&&(this.newTitle=this.media.titulo),this.media.descricao&&(this.newDescription=this.media.descricao),this.media.autor?this.newAuthorname=this.media.autor:this.newAuthorname="Autor n達o informado",this.media.mocambo&&(this.newAldeia=this.media.mocambo),this.newAldeia="N達o pertence a uma aldeia",this.media.tags&&this.media.tags.forEach((e=>this.tags.add(e)))},methods:{updateTags(e){this.tags=e},async submit(){this.loading=!0,this.mediaManager.makeMediaObject(this.newTitle,this.newDescription,Array.from(this.tags),this.newAuthorname,this.newAldeia,"",this.media.tipo,this.media.path);const e=await this.mediaManager.performMediaUpdate(this.mediaFileName);e?(this.tags=new Set,this.$q.notify({type:"positive",message:this.$t("gallery.alertUpdateSuccess"),actions:[{icon:"close",color:"white"}],onDismiss(){location.reload()}})):this.$q.notify({type:"negative",message:this.$t("gallery.alertUpdateFailed"),actions:[{icon:"close",color:"white"}]}),this.loading=!1}}};var q=t(4260),y=t(8689),A=t(4689),k=t(3314),F=t(7518),V=t.n(F);const $=(0,q.Z)(f,[["render",w]]),x=$;V()(f,"components",{QForm:y.Z,QInput:A.Z,QSelect:k.Z})}}]);