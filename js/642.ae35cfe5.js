"use strict";(self["webpackChunkjanereka_ryru"]=self["webpackChunkjanereka_ryru"]||[]).push([[642],{6642:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var a=i(3673),s=i(2323),o=i(8880);const n={class:"text-h6"};function d(e,t,i,d,r,l){const m=(0,a.up)("q-space"),u=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-separator"),h=(0,a.up)("q-img"),g=(0,a.up)("media-details"),w=(0,a.up)("edit-media"),b=(0,a.up)("media-content-buttons"),f=(0,a.up)("q-card-actions"),y=(0,a.up)("q-card"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{class:"full-width z-max"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"row items-center no-wrap text-primary"},{default:(0,a.w5)((()=>[(0,a._)("div",n,(0,s.zw)(i.media.titulo),1),(0,a.Wm)(m),(0,a.wy)((0,a.Wm)(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[q]])])),_:1}),(0,a.Wm)(p),(0,a.Wm)(c,{class:"image-wrapper"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{basic:"","spinner-color":"primary",src:`${r.baseUrl}/acervo/download/${i.media.path}`},null,8,["src"])])),_:1}),(0,a.Wm)(c,{class:"q-pt-none q-mb-xl"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(g,{media:i.media},null,8,["media"]),[[o.F8,!r.showEdit]])])),_:1}),i.allowEdition?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"q-pt-none"},{default:(0,a.w5)((()=>[r.showEdit?((0,a.wg)(),(0,a.j4)(w,{key:0,media:i.media,triggerSubmit:r.triggerSubmit,onFinishedSubmission:l.finishSubmit},null,8,["media","triggerSubmit","onFinishedSubmission"])):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(f,{align:"right",class:"bg-white text-teal fixed-bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{editMode:r.showEdit,allowEdition:i.allowEdition,onToggleEditMode:t[0]||(t[0]=e=>r.showEdit=!r.showEdit),onTriggerSubmit:t[1]||(t[1]=e=>r.triggerSubmit=!0),onTriggerDelete:t[2]||(t[2]=e=>l.deleteMedia())},null,8,["editMode","allowEdition"])])),_:1})])),_:1})}i(71);var r=i(1098);const l={name:"ContentsImage",components:{MediaContentButtons:()=>i.e(172).then(i.bind(i,5172)),MediaDetails:()=>i.e(62).then(i.bind(i,2062)),EditMedia:()=>Promise.all([i.e(736),i.e(299)]).then(i.bind(i,4299))},props:{media:{type:Object,required:!0},allowEdition:{type:Boolean,required:!0,default:!1}},data(){return{mediaManager:r.b.getManager(),baseUrl:this.$axios.defaults.baseURL,showEdit:!1,triggerSubmit:!1}},methods:{async deleteMedia(){this.mediaManager.makeMediaObject(this.media.titulo,this.media.descricao,this.media.tags,this.newAuthorname,this.newAldeia,"",this.media.tipo,this.media.path);const e=await this.mediaManager.performMediaDeletion();e?this.$q.notify({type:"positive",message:this.$t("gallery.alertDeleteSuccess"),actions:[{icon:"close",color:"white"}],onDismiss(){location.reload()}}):this.$q.notify({type:"negative",message:this.$t("gallery.alertDeleteFailed"),actions:[{icon:"close",color:"white"}]})},finishSubmit(){this.triggerSubmit=!1,this.showEdit=!1}}};var m=i(4260),u=i(151),c=i(5589),p=i(2025),h=i(8240),g=i(5869),w=i(4152),b=i(9367),f=i(677),y=i(7518),q=i.n(y);const S=(0,m.Z)(l,[["render",d],["__scopeId","data-v-2ee94932"]]),E=S;q()(l,"components",{QCard:u.Z,QCardSection:c.Z,QSpace:p.Z,QBtn:h.Z,QSeparator:g.Z,QImg:w.Z,QCardActions:b.Z}),q()(l,"directives",{ClosePopup:f.Z})}}]);